ls()
shiny::runApp('Metodos Analiticos/proyecto_final/examples/Shiny/census-app')
shiny::runApp('Metodos Analiticos/proyecto_final/examples/Shiny/stockVis')
shiny::runApp('Metodos Analiticos/proyecto_final/examples/Shiny/stockVis')
shiny::runApp('Metodos Analiticos/proyecto_final/examples/Shiny/App-1')
?datasets
library(help = "datasets")
dim(AirPassengers)
AirPassengers
Titanic
Nile
iris
u.1 <- c(1,2,4,3,5,2,5)*10
v.1 <- c(1,2,3,4)
X.1 <- u.1 %*% t(v.1)
X.1
## ------------------------------------------------------------------------
u.2 <- c(0,1,1,0,3,3,0)*10
v.2 <- c(0,3,0,2)
## ------------------------------------------------------------------------
X.2 <- u.2 %*% t(v.2)
X.2
## ------------------------------------------------------------------------
X.2
X.final <- X.1 + X.2
X.final
ls()
library(NMF)
install.packages('NMF')
install.packages('NMF')
install.packages('NMF')
library(NMF)
library(ElemStatLearn)
dim(zip.train)
zip.2 <- zip.train[,-1] + 1
digitos.n <- nmf(zip.2[1:1500,], rank = 20, method = 'lee', nrun = 1, .options ='t')
W <- basis(digitos.n)
dim(W)
H <- coef(digitos.n)
dim(H)
H.d <- cbind(1:20, H)
zip2im <- function (zip, line)
{
im <- zip[line, ]
im <- im[-1]
im <- t(matrix(im, 16, 16, byrow = TRUE))
im <- im[, 16:1]
return(im)
}
par(mfrow = c(5,4))
for(j in 1:20){
image(zip2im(H.d, j))
}
round(W[8,]/max(W[8,]),3)
## ------------------------------------------------------------------------
round(W[1,]/max(W[1,]),3)
data.frame(idx=1:20,round(W[1,]/max(W[1,]),3))
data.frame(idx=1:20,val=round(W[1,]/max(W[1,]),3))
library(ggplot2)
zip2im(H.d, j)
ggplot(zip2im(H.d, j)) +
geom_raster()
df <- t(H)
df
df <- t(H) %>%
data.frame
df$x <- rep(1:16,times = 16)
df$y <- rep(1:16,each=16)
df$
x
df$y
df <- t(H) %>%
data.frame
library(dplyr)
dim(df)
df <- t(H) %>%
data.frame
df <- t(H) %>%
data.frame
dim(df)
paste0('c',1:20)
names(df) <- paste0('c',1:20)
df$x <- rep(1:16,times = 16)
df$y <- rep(1:16,each=16)
ggplot(df, aes(x,y,z=c1)) +
geom_raster()
ggplot(df, aes(x,y,z=c2)) +
geom_raster()
ggplot(df, aes(x,y,z=c2)) +
geom_tile()
ggplot(df, aes(x,y,fill=c1)) +
geom_tile()
ggplot(df, aes(x,y,fill=c1)) +
geom_raster()
df <- %>%
gather(id,val,c1:c20)
ggplot(df, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df <- t(H) %>%
data.frame
names(df) <- paste0('c',1:20)
df$x <- rep(1:16,times = 16)
df$y <- rep(1:16,each=16)
df <- %>%
gather(id,val,c1:c20)
ggplot(df, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
library(tidyr)
df <- t(H) %>%
data.frame
names(df) <- paste0('c',1:20)
df$x <- rep(1:16,times = 16)
df$y <- rep(1:16,each=16)
df <- %>%
gather(id,val,c1:c20)
ggplot(df, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df <- t(H) %>%
data.frame
names(df) <- paste0('c',1:20)
df$x <- rep(1:16,times = 16)
df$y <- rep(1:16,each=16)
df <- df %>%
gather(id,val,c1:c20)
ggplot(df, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
round(W[8,]/max(W[8,]),3)
a
head(df)
dim(df)
dim(df %>% filter(id == 'c1'))
df_a <- df %>%
mutate(val = val * rep(a,each=256))
a <- round(W[8,]/max(W[8,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
a
df <- t(H) %>%
data.frame
names(df) <- paste0('c',1:20)
df$y <- rep(1:16,times = 16)
df$x <- rep(1:16,each=16)
df <- df %>%
gather(id,val,c1:c20)
ggplot(df, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df <- t(H) %>%
data.frame
names(df) <- paste0('c',1:20)
df$x <- rep(1:16,times = 16)
df$y <- rep(1:16,each=16)
df <- df %>%
gather(id,val,c1:c20)
ggplot(df, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
a <- round(W[8,]/max(W[8,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
row <- 8
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
row <- 20
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
zip.train[1:10,1:10]
zip.train[1:10,1:10] + 1
zip.train[1:10,1:10] + 1
row <- 1
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
row <- 2
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
matrix(1:6,2)
matrix(matrix(1:6,2),3)
df <- t(H) %>%
matrix(nrow=nrow(df)*ncol(df))
df
zip.train[1:10,1:10] + 1
dim(zip.train[,-1])
zip.2[1:1500,]
dim(zip.2[1:1500,])
dim(H)
a
df <- t(H) %>%
data.frame
dim(df)
names(df) <- paste0('c',1:20)
df$x <- rep(1:16,times = 16)
df$y <- rep(1:16,each=16)
df <- df %>%
gather(id,val,c1:c20)
ggplot(df, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
row <- 2
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
dim(df_a_sum)
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
row <- 3
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df <- t(H) %>%
data.frame
names(df) <- paste0('c',1:20)
df$x <- rep(1:16,times = 16)
df$y <- rep(1:16,each=16)
df <- df %>%
gather(id,val,c1:c20)
ggplot(df, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
row <- 3
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
W[row,] %*% H
image(matrix(W[row,] %*% H, 16))
par(mfrow=c(1,1))
image(matrix(W[row,] %*% H, 16))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
row <- 4
image(matrix(W[1,] %*% H, 16))
image(matrix(W[2,] %*% H, 16))
image(matrix(W[3,] %*% H, 16))
image(matrix(W[4,] %*% H, 16))
df$x <- rep(1:16,times = 16)
df$y <- rep(16:1,each=16)
df <- df %>%
gather(id,val,c1:c20)
ggplot(df, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
row <- 4
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
row <- 1
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
image(matrix(W[10,] %*% H, 16))
image(matrix(W[11,] %*% H, 16))
image(matrix(W[12,] %*% H, 16))
row <- 12
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
ggplot(df_a, aes(x,y,fill=val)) +
geom_raster() +
facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
image(matrix(W[12,] %*% H, 16))
row <- 13
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
# ggplot(df_a, aes(x,y,fill=val)) +
#   geom_raster() +
#   facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
image(matrix(W[row,] %*% H, 16))
row <- 14
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
# ggplot(df_a, aes(x,y,fill=val)) +
#   geom_raster() +
#   facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
image(matrix(W[row,] %*% H, 16))
row <- 15
a <- round(W[row,]/max(W[row,]),3)
df_a <- df %>%
mutate(val = val * rep(a,each=256))
# ggplot(df_a, aes(x,y,fill=val)) +
#   geom_raster() +
#   facet_wrap(~ id)
df_a_sum <- df_a %>%
group_by(x,y) %>%
summarise(val = sum(val))
ggplot(df_a_sum, aes(x,y,fill=val)) +
geom_raster()
image(matrix(W[row,] %*% H, 16))
b <- matrix(W[row,] %*% H, 16)
image(b[nrow(b):1,])
b <- matrix(W[row,] %*% H, 16)
image(b[,ncol(b):1])
rm(list=ls())
library(dplyr)
library(ggplot2)
library(lubridate)
library(tidyr)
library(ggmap)
gdelt_1 <- read.csv('output/monthyear_actor1countrycode_stats_full.psv', header = T, sep = '|')
dim(gdelt_1)
getwd()
library(dplyr)
library(ggplot2)
library(lubridate)
library(tidyr)
library(ggmap)
gdelt_1 <- read.csv('output/monthyear_actor1countrycode_stats_full_countryname.psv', header = T, sep = '|')
countrynames <- read.csv('etc/countrycodes.psv', header = F, sep = '|')
names(countrynames) <- c('actor1countrycode','actor1countryname')
dim(gdelt_1)
head(gdelt_1)
sort(unique(gdelt_1$actor1countrycode))
# Filtramos y construimos la fecha
x1 <- gdelt_1 %>%
mutate(aux = as.character(monthyear),
year = substr(aux,1,4),
month = substr(aux,5,6),
date = as.Date(paste(year, month, '01'), format = '%Y %m %d')) %>%
group_by(actor1countrycode) %>%
filter(sum(numevents) > 200000) %>% # Mexico tenÃ­a como 700,000
ungroup
# Correlaciones? --> Mejor K Means
gdelt_ts <- x1 %>%
dplyr::select(actor1countrycode, actor1countrycode, date, numevents) %>%
mutate(actor1countrycode = gsub(' ', '_', actor1countrycode)) %>%
spread(actor1countrycode, numevents)
gdelt_ts[is.na(gdelt_ts)] <- 0 # No hubo noticias
dim(gdelt_ts)
x <- cor(gdelt_ts[-1])[,'MEX']
cor_mex <- data.frame(country = names(x), cor_mex = as.numeric(x)) %>%
arrange(desc(cor_mex)) %>%
left_join(countrynames, by = c('country'='actor1countrycode'))
library(depmixS4)
?depmix
shiny::runApp('Metodos Analiticos/proyecto_final/felipe/App_Shiny_def')
shiny::runApp('Metodos Analiticos/proyecto_final/felipe/App_Shiny_def')
library(Matrix)
Diagonal(1:8)
Diagonal(8,1:8)
setwd("~/data-science/maestria/estadistica_computacional/App_LCG")
library(shiny)
shiny::runApp()
shiny::runApp()
shiny::runApp()
numeric(4)
shiny::runApp()
LCG <- function(nsim, M = 259, a = 67, b = 1, x0 = 1){
x <- c(x0, nsim - 1)
for(i in 1:(nsim - 1)) x[i+1] <- (a*x[i] + b) %% M
x/M
}
LCG(10)
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
d
d()
output
output$random_numbers
shiny::runApp()
shiny::runApp()
shiny::runApp()
a
a()
shiny::runApp()
a
a()
a
shiny::runApp()
shiny::runApp()
LCG(10)
2^16 - 1
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
